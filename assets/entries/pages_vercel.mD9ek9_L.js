import{o as c,a as p}from"../chunks/chunk-BQqP4I8c.js";import{j as e}from"../chunks/chunk--_W9w5QS.js";import{L as a}from"../chunks/chunk-Bgrco-MI.js";/* empty css                      */import{W as h}from"../chunks/chunk-C7kKzEQ9.js";/* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      */import{u as d}from"../chunks/chunk-vXxLylpY.js";import{T as x,a as j,b as i,c as l}from"../chunks/chunk-DQloi1Lk.js";/* empty css                      */import{U as g}from"../chunks/chunk-CWTFvaaD.js";import{E as r}from"../chunks/chunk-CV30nnvM.js";/* empty css                      *//* empty css                      */import{M as u}from"../chunks/chunk-DfYQviVU.js";import{M as y}from"../chunks/chunk-yS4BlvcG.js";import{M as m,a as f}from"../chunks/chunk-DUnNtJnt.js";/* empty css                      *//* empty css                      *//* empty css                      */const v=[{pageSectionId:"get-started",pageSectionLevel:2,pageSectionTitle:"Get started"},{pageSectionId:"new-app",pageSectionLevel:3,pageSectionTitle:"New app"},{pageSectionId:"add-to-existing-app",pageSectionLevel:3,pageSectionTitle:"Add to existing app"},{pageSectionId:"1-install",pageSectionLevel:4,pageSectionTitle:"1. Install"},{pageSectionId:"2-server-optional",pageSectionLevel:4,pageSectionTitle:"2. Server (optional)"},{pageSectionId:"3-deployment",pageSectionLevel:4,pageSectionTitle:"3. Deployment"},{pageSectionId:"deployment",pageSectionLevel:2,pageSectionTitle:"Deployment"},{pageSectionId:"cli",pageSectionLevel:3,pageSectionTitle:"CLI"},{pageSectionId:"git",pageSectionLevel:3,pageSectionTitle:"Git"},{pageSectionId:"isr",pageSectionLevel:2,pageSectionTitle:"ISR"},{pageSectionId:"manual-integration",pageSectionLevel:2,pageSectionTitle:"Manual integration"},{pageSectionId:"api-route",pageSectionLevel:3,pageSectionTitle:"API Route"},{pageSectionId:"build-output-api",pageSectionLevel:3,pageSectionTitle:"Build Output API"},{pageSectionId:"api-routes-with-development",pageSectionLevel:3,pageSectionTitle:"API Routes with development"}];function o(t){const n={a:"a",blockquote:"blockquote",code:"code",figure:"figure",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",ul:"ul",...d(),...t.components},{CodeSnippets:s}=n;return s||A("CodeSnippets"),e.jsxs(e.Fragment,{children:[e.jsx(m,{provider:"Vercel",link:"https://vercel.com"}),`
`,e.jsx(f,{provider:"Vercel"}),`
`,e.jsx("h2",{id:"get-started",children:"Get started"}),`
`,e.jsx("h3",{id:"new-app",children:"New app"}),`
`,e.jsx(g,{children:"Vercel with Photon"}),`
`,e.jsx("h3",{id:"add-to-existing-app",children:"Add to existing app"}),`
`,e.jsxs(n.blockquote,{children:[`
`,e.jsxs(n.p,{children:["If you're using ",e.jsx(n.code,{children:"vike-server"})," then  ",e.jsxs(a,{href:"/migration/vike-photon",children:["migrate to ",e.jsx(n.code,{children:"vike-photon"})]}),"."]}),`
`]}),`
`,e.jsx("h4",{id:"1-install",children:"1. Install"}),`
`,e.jsxs(x,{children:[e.jsxs(j,{children:[e.jsx(i,{children:"npm"}),e.jsx(i,{children:"pnpm"}),e.jsx(i,{children:"yarn"})]}),e.jsx(l,{children:e.jsx(n.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(n.pre,{tabIndex:"0","data-language":"shell","data-theme":"github-light",children:e.jsx(n.code,{"data-language":"shell","data-theme":"github-light",style:{display:"grid"},children:e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#6F42C1"},children:"npm"}),e.jsx(n.span,{style:{color:"#032F62"},children:" i"}),e.jsx(n.span,{style:{color:"#032F62"},children:" vike-photon"}),e.jsx(n.span,{style:{color:"#032F62"},children:" @photonjs/vercel"})]})})})})}),e.jsx(l,{children:e.jsx(n.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(n.pre,{tabIndex:"0","data-language":"shell","data-theme":"github-light",children:e.jsx(n.code,{"data-language":"shell","data-theme":"github-light",style:{display:"grid"},children:e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#6F42C1"},children:"pnpm"}),e.jsx(n.span,{style:{color:"#032F62"},children:" add"}),e.jsx(n.span,{style:{color:"#032F62"},children:" vike-photon"}),e.jsx(n.span,{style:{color:"#032F62"},children:" @photonjs/vercel"})]})})})})}),e.jsx(l,{children:e.jsx(n.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(n.pre,{tabIndex:"0","data-language":"shell","data-theme":"github-light",children:e.jsx(n.code,{"data-language":"shell","data-theme":"github-light",style:{display:"grid"},children:e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#6F42C1"},children:"yarn"}),e.jsx(n.span,{style:{color:"#032F62"},children:" add"}),e.jsx(n.span,{style:{color:"#032F62"},children:" vike-photon"}),e.jsx(n.span,{style:{color:"#032F62"},children:" @photonjs/vercel"})]})})})})})]}),`
`,e.jsxs(s,{children:[e.jsx(n.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(n.pre,{className:"has-diff",tabIndex:"0","data-language":"js","data-theme":"github-light",children:e.jsxs(n.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#6A737D"},children:"// pages/+config.js"})}),`
`,e.jsx(n.span,{"data-line":"",children:" "}),`
`,e.jsxs(n.span,{className:"diff add","data-line":"",children:[e.jsx(n.span,{style:{color:"#D73A49"},children:"import"}),e.jsx(n.span,{style:{color:"#24292E"},children:" vikePhoton "}),e.jsx(n.span,{style:{color:"#D73A49"},children:"from"}),e.jsx(n.span,{style:{color:"#032F62"},children:" 'vike-photon/config'"})]}),`
`,e.jsx(n.span,{"data-line":"",children:" "}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#D73A49"},children:"export"}),e.jsx(n.span,{style:{color:"#D73A49"},children:" default"}),e.jsx(n.span,{style:{color:"#24292E"},children:" {"})]}),`
`,e.jsx(n.span,{className:"diff add","data-line":"",children:e.jsx(n.span,{style:{color:"#24292E"},children:"  extends: [vikePhoton] "})}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#24292E"},children:"}"})})]})})}),e.jsx(n.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(n.pre,{className:"has-diff",tabIndex:"0","data-language":"ts","data-theme":"github-light",children:e.jsxs(n.code,{"data-language":"ts","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#6A737D"},children:"// pages/+config.ts"})}),`
`,e.jsx(n.span,{"data-line":"",children:" "}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#D73A49"},children:"import"}),e.jsx(n.span,{style:{color:"#D73A49"},children:" type"}),e.jsx(n.span,{style:{color:"#24292E"},children:" { Config } "}),e.jsx(n.span,{style:{color:"#D73A49"},children:"from"}),e.jsx(n.span,{style:{color:"#032F62"},children:" 'vike/types'"})]}),`
`,e.jsxs(n.span,{className:"diff add","data-line":"",children:[e.jsx(n.span,{style:{color:"#D73A49"},children:"import"}),e.jsx(n.span,{style:{color:"#24292E"},children:" vikePhoton "}),e.jsx(n.span,{style:{color:"#D73A49"},children:"from"}),e.jsx(n.span,{style:{color:"#032F62"},children:" 'vike-photon/config'"})]}),`
`,e.jsx(n.span,{"data-line":"",children:" "}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#D73A49"},children:"export"}),e.jsx(n.span,{style:{color:"#D73A49"},children:" default"}),e.jsx(n.span,{style:{color:"#24292E"},children:" {"})]}),`
`,e.jsx(n.span,{className:"diff add","data-line":"",children:e.jsx(n.span,{style:{color:"#24292E"},children:"  extends: [vikePhoton]"})}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#24292E"},children:"} "}),e.jsx(n.span,{style:{color:"#D73A49"},children:"satisfies"}),e.jsx(n.span,{style:{color:"#6F42C1"},children:" Config"})]})]})})})]}),`
`,e.jsx(u,{pkg:"vercel"}),`
`,e.jsxs(n.blockquote,{children:[`
`,e.jsxs(n.p,{children:["Under the hood, ",e.jsx(n.code,{children:"@photonjs/vercel"})," uses Vercel's ",e.jsx(n.a,{href:"https://vercel.com/docs/build-output-api/v3",children:"Build Output API"}),"."]}),`
`]}),`
`,e.jsx("h4",{id:"2-server-optional",children:"2. Server (optional)"}),`
`,e.jsx(y,{}),`
`,e.jsx("h4",{id:"3-deployment",children:"3. Deployment"}),`
`,e.jsxs(n.p,{children:["See ",e.jsx(a,{href:"#deployment"}),"."]}),`
`,e.jsx("h2",{id:"deployment",children:"Deployment"}),`
`,e.jsx(n.p,{children:"You can deploy your app using either Vercel's CLI or Vercel's Git integration."}),`
`,e.jsx("h3",{id:"cli",children:"CLI"}),`
`,e.jsxs(n.p,{children:["Install the ",e.jsx(n.a,{href:"https://vercel.com/docs/cli",children:"Vercel CLI"}),", then run the ",e.jsx(n.code,{children:"vercel"}),` command.
The CLI will guide you through the necessary steps.`]}),`
`,e.jsx("h3",{id:"git",children:"Git"}),`
`,e.jsxs(n.p,{children:["See the ",e.jsx(n.a,{href:"https://vercel.com/docs/git#deploying-a-git-repository",children:"official documentation"}),"."]}),`
`,e.jsx("h2",{id:"isr",children:"ISR"}),`
`,e.jsxs(n.p,{children:["Vike supports ",e.jsx(n.a,{href:"https://vercel.com/docs/concepts/incremental-static-regeneration/overview",children:"Incremental Static Regeneration (ISR)"})," when using Photon."]}),`
`,e.jsxs(s,{children:[e.jsx(n.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(n.pre,{tabIndex:"0","data-language":"js","data-theme":"github-light",children:e.jsxs(n.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#6A737D"},children:"// pages/some-route/+config.js"})}),`
`,e.jsx(n.span,{"data-line":"",children:" "}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#D73A49"},children:"export"}),e.jsx(n.span,{style:{color:"#D73A49"},children:" default"}),e.jsx(n.span,{style:{color:"#24292E"},children:" {"})]}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#6A737D"},children:"  // Options"})}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#24292E"},children:"  isr: {"})}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#6A737D"},children:"    // Expiration time (in seconds) before the cached asset is re-generated"})}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#24292E"},children:"    expiration: "}),e.jsx(n.span,{style:{color:"#005CC5"},children:"30"})]}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#24292E"},children:"  }"})}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#24292E"},children:"}"})})]})})}),e.jsx(n.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(n.pre,{tabIndex:"0","data-language":"ts","data-theme":"github-light",children:e.jsxs(n.code,{"data-language":"ts","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#6A737D"},children:"// pages/some-route/+config.ts"})}),`
`,e.jsx(n.span,{"data-line":"",children:" "}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#D73A49"},children:"import"}),e.jsx(n.span,{style:{color:"#D73A49"},children:" type"}),e.jsx(n.span,{style:{color:"#24292E"},children:" { Config } "}),e.jsx(n.span,{style:{color:"#D73A49"},children:"from"}),e.jsx(n.span,{style:{color:"#032F62"},children:" 'vike/types'"})]}),`
`,e.jsx(n.span,{"data-line":"",children:" "}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#D73A49"},children:"export"}),e.jsx(n.span,{style:{color:"#D73A49"},children:" default"}),e.jsx(n.span,{style:{color:"#24292E"},children:" {"})]}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#6A737D"},children:"  // Options"})}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#24292E"},children:"  isr: {"})}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#6A737D"},children:"    // Expiration time (in seconds) before the cached asset is re-generated"})}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#24292E"},children:"    expiration: "}),e.jsx(n.span,{style:{color:"#005CC5"},children:"30"})]}),`
`,e.jsx(n.span,{"data-line":"",children:e.jsx(n.span,{style:{color:"#24292E"},children:"  },"})}),`
`,e.jsxs(n.span,{"data-line":"",children:[e.jsx(n.span,{style:{color:"#24292E"},children:"} "}),e.jsx(n.span,{style:{color:"#D73A49"},children:"satisfies"}),e.jsx(n.span,{style:{color:"#6F42C1"},children:" Config"})]})]})})})]}),`
`,e.jsx("h2",{id:"manual-integration",children:"Manual integration"}),`
`,e.jsx("h3",{id:"api-route",children:"API Route"}),`
`,e.jsxs(n.p,{children:["A simple way to integrate Vercel is to create a Vercel API Route ",e.jsx(n.code,{children:"api/ssr.js"})," that server-side renders your app."]}),`
`,e.jsx(n.p,{children:"Example:"}),`
`,e.jsxs(n.ul,{children:[`
`,e.jsxs(n.li,{children:[`
`,e.jsx(r,{timestamp:"2024.03",repo:"brillout/vike-with-vercel"}),`
`]}),`
`]}),`
`,e.jsxs(h,{children:["Make sure to properly set ",e.jsx(n.code,{children:"OUTPUT DIRECTORY"})," in your Vercel dashboard, see the example's ",e.jsx(n.code,{children:"README.md"})," instructions."]}),`
`,e.jsxs(n.blockquote,{children:[`
`,e.jsx(n.p,{children:"Using a Vercel API Route is a sturdy way to deploy to Vercel, as API Routes is a core Vercel feature: it's here to stay and, most importantly, stable. (Whereas Vercel's Build Output API is a moving target with occasional breaking changes.) Once you've set the server-side rendering API Route, you can expect it to work for the foreseeable future."}),`
`]}),`
`,e.jsx("h3",{id:"build-output-api",children:"Build Output API"}),`
`,e.jsxs(n.p,{children:["For maximum flexibility and configuration options, you can use the ",e.jsx(n.a,{href:"https://vercel.com/docs/build-output-api/v3",children:"Build Output API"})," instead of an API route."]}),`
`,e.jsx(n.p,{children:"Example:"}),`
`,e.jsxs(n.ul,{children:[`
`,e.jsxs(n.li,{children:[`
`,e.jsx(r,{timestamp:"2022.07",repo:"brillout/vite-plugin-ssr_vercel_build-output-api"}),`
`,e.jsxs(n.blockquote,{children:[`
`,e.jsxs(n.p,{children:["vite-plugin-ssr was the ",e.jsx(n.a,{href:"https://vite-plugin-ssr.com/vike",children:"previous name of Vike"}),"."]}),`
`]}),`
`]}),`
`]}),`
`,e.jsx("h3",{id:"api-routes-with-development",children:"API Routes with development"}),`
`,e.jsx(n.p,{children:"Vercel API Routes only work in production on Vercel's platform. This means, you may need to re-create your API routes integration for development."}),`
`,e.jsx(n.p,{children:"For example, you typically need to integrate your data layer twice:"}),`
`,e.jsxs(n.ol,{children:[`
`,e.jsx(n.li,{children:"Using Vercel's API Routes, for Vercel deployment."}),`
`,e.jsx(n.li,{children:"Using a local server (e.g. Express.js), for development."}),`
`]}),`
`,e.jsx(n.p,{children:"This is usually easy to achieve as most data layer tools integrate using a single HTTP endpoint. For example:"}),`
`,e.jsxs(n.ul,{children:[`
`,e.jsxs(n.li,{children:[e.jsx(n.a,{href:"https://graphql.org/",children:"GraphQL"})," integrates over a single HTTP endpoint ",e.jsx(n.code,{children:"/graphql"}),"."]}),`
`,e.jsxs(n.li,{children:[e.jsx(n.a,{href:"https://telefunc.com/",children:"Telefunc"})," integrates over a single HTTP endpoint ",e.jsx(n.code,{children:"/_telefunc"}),"."]}),`
`,e.jsxs(n.li,{children:[e.jsx(n.a,{href:"https://trpc.io/",children:"tRPC"})," integrates over a single HTTP endpoint as well."]}),`
`]}),`
`,e.jsx(n.p,{children:"In other words, you can add a data layer by:"}),`
`,e.jsxs(n.ul,{children:[`
`,e.jsx(n.li,{children:"Creating a new Vercel API Route, integrating that single endpoint."}),`
`,e.jsx(n.li,{children:"Creating a new route to your local development server (e.g. Express.js), integrating that single endpoint."}),`
`]})]})}function S(t={}){const{wrapper:n}={...d(),...t.components};return n?e.jsx(n,{...t,children:e.jsx(o,{...t})}):o(t)}function A(t,n){throw new Error("Expected component `"+t+"` to be defined: you likely forgot to import, pass, or provide it.")}const b=Object.freeze(Object.defineProperty({__proto__:null,default:S,pageSectionsExport:v},Symbol.toStringTag,{value:"Module"})),Y={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/renderer/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:p}},onCreatePageContext:{type:"cumulative",definedAtData:[{filePathToShowToUser:"@brillout/docpress/renderer/onCreatePageContext",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:c}]},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/vercel/+Page.mdx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:b}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}}};export{Y as configValuesSerialized};
